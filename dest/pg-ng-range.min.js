"use strict";!function(){function pgNgRange($document,$timeout){function controller($scope){function setValue(perc){self.value=(Number(self.max)-Number(self.min))*(perc/100)+Number(self.min)}function indicatorPos(){return self.percentage>99?99:Math.round(self.percentage)}var self=this;self.bars=[],self.dragging=!1,self.indicatorPos=indicatorPos,self.min?!0:self.min=0,self.max?!0:self.max=100,self.value?!0:setValue(50),self.percentage=Math.round((self.value-self.min)/(self.max-self.min)*100),$scope.$watch("rangeCtrl.percentage",setValue);for(var i=99;i>=0;i--)self.bars.push(i)}function postLink($scope,$element,attrs,ctrl){function mousedown(evt){ctrl.dragging||($scope.$apply(function(){ctrl.dragging=!0}),initialX=evt.pageX||evt.clientX,initialPerc=ctrl.percentage,$element.addClass("dragging"))}function mouseup(){ctrl.dragging&&($scope.$apply(function(){ctrl.dragging=!1}),$element.removeClass("dragging"))}function mousemove(evt){if(ctrl.dragging){var _x=evt.pageX||evt.clientX,_limit=width,_val=_x-initialX+_limit*(initialPerc/100);percAux=100*_val/_limit,$scope.$apply(function(){ctrl.percentage=0>percAux?0:percAux>100?100:percAux})}}function keydown(evt){var _code=evt.which?evt.which:evt.keyCode;switch(_code){case 37:$scope.$apply(moveLeft);break;case 39:$scope.$apply(moveRight)}}function moveLeft(){ctrl.percentage-=1}function moveRight(){ctrl.percentage+=1}function paintBars(amount){for(var i=0;i<=bars.length-1;i++)amount>=i?bars.eq(i).addClass("colorized"):bars.eq(i).removeClass("colorized")}var initialX,initialPerc,bars,percAux,width;$timeout(function(){var trigger=angular.element($element[0].querySelector(".range-indicator"));bars=angular.element($element[0].querySelectorAll(".bar")),width=$element.prop("offsetWidth"),trigger.on("mousedown",mousedown),$document.on("mouseup",mouseup),$document.on("mousemove",mousemove),$document.on("keydown",keydown),$scope.$watch("rangeCtrl.percentage",paintBars)})}var template=['<div class="pg-range-wrapper">','<div class="pg-range">','<div class="range-indicator" data-ng-style="{left: rangeCtrl.indicatorPos() + \'%\'}"></div>','<div class="range-bars">','<div class="bar" data-ng-repeat="bar in ::rangeCtrl.bars">',"</div>","</div>","</div>","</div>"].join(""),directive={scope:{value:"=",min:"=",max:"="},template:template,controller:controller,link:postLink,controllerAs:"rangeCtrl",bindToController:!0,replace:!0};return directive}angular.module("pg-ng-range",[]).directive("pgNgRange",pgNgRange),pgNgRange.$inject=["$document","$timeout"]}();